{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/Message.tsx"],"sourcesContent":["'use client';\n\nimport { useRef, useEffect } from 'react';\nimport { Play, Pause } from 'lucide-react';\n\ninterface MessageProps {\n  message: {\n    role: 'user' | 'assistant';\n    content: string;\n    audio_url?: string;\n  };\n  messageIndex: number;\n  audioRefsRef: React.MutableRefObject<{ [key: number]: HTMLAudioElement }>;\n  isPlaying: boolean;\n  onPlayAudio: (index: number) => void;\n  onAudioEnded: () => void;\n}\n\nexport default function Message({\n  message,\n  messageIndex,\n  audioRefsRef,\n  isPlaying,\n  onPlayAudio,\n  onAudioEnded,\n}: MessageProps) {\n  const audioRef = useRef<HTMLAudioElement>(null);\n\n  useEffect(() => {\n    if (audioRef.current) {\n      audioRefsRef.current[messageIndex] = audioRef.current;\n    }\n  }, [messageIndex, audioRefsRef]);\n\n  useEffect(() => {\n    const audio = audioRef.current;\n    if (!audio) return;\n\n    if (isPlaying) {\n      audio.play().catch((err) => console.error('Error playing audio:', err));\n    } else {\n      audio.pause();\n    }\n  }, [isPlaying]);\n\n  const togglePlay = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (isPlaying) {\n      if (audioRef.current) {\n        audioRef.current.pause();\n      }\n      onAudioEnded();\n    } else {\n      onPlayAudio(messageIndex);\n    }\n  };\n\n  return (\n    <div className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n      <div\n        className={`max-w-xs px-4 py-3 rounded-lg ${\n          message.role === 'user'\n            ? 'bg-green-600/90 text-white'\n            : 'bg-gray-800/90 text-gray-100 border border-gray-700'\n        }`}\n      >\n        <p className=\"text-sm break-words\">{message.content}</p>\n\n        {message.audio_url && (\n          <div className=\"mt-3 flex items-center gap-3\">\n            <button\n              onClick={togglePlay}\n              className={`transition p-2 rounded ${\n                isPlaying\n                  ? 'bg-red-600 hover:bg-red-500'\n                  : 'bg-gray-700 hover:bg-gray-600'\n              }`}\n              title={isPlaying ? 'Pause' : 'Play'}\n            >\n              {isPlaying ? (\n                <Pause size={16} className=\"text-white\" />\n              ) : (\n                <Play size={16} className=\"text-white\" />\n              )}\n            </button>\n            <span className=\"text-xs text-gray-400\">\n              {isPlaying ? 'Playing...' : 'Audio'}\n            </span>\n            <audio\n              ref={audioRef}\n              src={message.audio_url}\n              onEnded={onAudioEnded}\n              crossOrigin=\"anonymous\"\n              className=\"hidden\"\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAkBe,SAAS,QAAQ,EAC9B,OAAO,EACP,YAAY,EACZ,YAAY,EACZ,SAAS,EACT,WAAW,EACX,YAAY,EACC;IACb,MAAM,WAAW,IAAA,gQAAM,EAAmB;IAE1C,IAAA,mQAAS,EAAC;QACR,IAAI,SAAS,OAAO,EAAE;YACpB,aAAa,OAAO,CAAC,aAAa,GAAG,SAAS,OAAO;QACvD;IACF,GAAG;QAAC;QAAc;KAAa;IAE/B,IAAA,mQAAS,EAAC;QACR,MAAM,QAAQ,SAAS,OAAO;QAC9B,IAAI,CAAC,OAAO;QAEZ,IAAI,WAAW;YACb,MAAM,IAAI,GAAG,KAAK,CAAC,CAAC,MAAQ,QAAQ,KAAK,CAAC,wBAAwB;QACpE,OAAO;YACL,MAAM,KAAK;QACb;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,aAAa,CAAC;QAClB,EAAE,cAAc;QAChB,EAAE,eAAe;QAEjB,IAAI,WAAW;YACb,IAAI,SAAS,OAAO,EAAE;gBACpB,SAAS,OAAO,CAAC,KAAK;YACxB;YACA;QACF,OAAO;YACL,YAAY;QACd;IACF;IAEA,qBACE,+RAAC;QAAI,WAAW,CAAC,KAAK,EAAE,QAAQ,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;kBACjF,cAAA,+RAAC;YACC,WAAW,CAAC,8BAA8B,EACxC,QAAQ,IAAI,KAAK,SACb,+BACA,uDACJ;;8BAEF,+RAAC;oBAAE,WAAU;8BAAuB,QAAQ,OAAO;;;;;;gBAElD,QAAQ,SAAS,kBAChB,+RAAC;oBAAI,WAAU;;sCACb,+RAAC;4BACC,SAAS;4BACT,WAAW,CAAC,uBAAuB,EACjC,YACI,gCACA,iCACJ;4BACF,OAAO,YAAY,UAAU;sCAE5B,0BACC,+RAAC,8PAAK;gCAAC,MAAM;gCAAI,WAAU;;;;;qDAE3B,+RAAC,2PAAI;gCAAC,MAAM;gCAAI,WAAU;;;;;;;;;;;sCAG9B,+RAAC;4BAAK,WAAU;sCACb,YAAY,eAAe;;;;;;sCAE9B,+RAAC;4BACC,KAAK;4BACL,KAAK,QAAQ,SAAS;4BACtB,SAAS;4BACT,aAAY;4BACZ,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAOxB"}},
    {"offset": {"line": 154, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/MessageList.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef } from 'react';\nimport Message from './Message';\n\ninterface MessageData {\n  role: 'user' | 'assistant';\n  content: string;\n  audio_url?: string;\n}\n\ninterface MessageListProps {\n  messages: MessageData[];\n  audioRefsRef: React.MutableRefObject<{ [key: number]: HTMLAudioElement }>;\n  playingIndex: number | null;\n  onPlayAudio: (index: number) => void;\n  onAudioEnded: () => void;\n}\n\nexport default function MessageList({\n  messages,\n  audioRefsRef,\n  playingIndex,\n  onPlayAudio,\n  onAudioEnded,\n}: MessageListProps) {\n  const endRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    endRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  return (\n    <div className=\"flex-1 overflow-y-auto px-4 py-6 space-y-4\">\n      <div className=\"max-w-2xl mx-auto w-full space-y-4\">\n        {messages.length === 0 ? (\n          <div className=\"flex items-center justify-center h-full text-gray-400 text-center\">\n            <div>\n              <p className=\"text-lg\">Start a conversation</p>\n              <p className=\"text-sm text-gray-500 mt-2\">\n                Type a message or use voice to interact with the DJ Agent\n              </p>\n            </div>\n          </div>\n        ) : (\n          messages.map((message, index) => (\n            <Message\n              key={index}\n              message={message}\n              messageIndex={index}\n              audioRefsRef={audioRefsRef}\n              isPlaying={playingIndex === index}\n              onPlayAudio={onPlayAudio}\n              onAudioEnded={onAudioEnded}\n            />\n          ))\n        )}\n        <div ref={endRef} />\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAmBe,SAAS,YAAY,EAClC,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,WAAW,EACX,YAAY,EACK;IACjB,MAAM,SAAS,IAAA,gQAAM,EAAiB;IAEtC,IAAA,mQAAS,EAAC;QACR,OAAO,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IACtD,GAAG;QAAC;KAAS;IAEb,qBACE,+RAAC;QAAI,WAAU;kBACb,cAAA,+RAAC;YAAI,WAAU;;gBACZ,SAAS,MAAM,KAAK,kBACnB,+RAAC;oBAAI,WAAU;8BACb,cAAA,+RAAC;;0CACC,+RAAC;gCAAE,WAAU;0CAAU;;;;;;0CACvB,+RAAC;gCAAE,WAAU;0CAA6B;;;;;;;;;;;;;;;;2BAM9C,SAAS,GAAG,CAAC,CAAC,SAAS,sBACrB,+RAAC,yLAAO;wBAEN,SAAS;wBACT,cAAc;wBACd,cAAc;wBACd,WAAW,iBAAiB;wBAC5B,aAAa;wBACb,cAAc;uBANT;;;;;8BAUX,+RAAC;oBAAI,KAAK;;;;;;;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/InputBox.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef } from 'react';\nimport { Send, Mic, Square } from 'lucide-react';\n\ninterface InputBoxProps {\n  onSendMessage: (text: string) => void;\n  onAudioSubmit: (audio: Blob) => void;\n  loading: boolean;\n}\n\nexport default function InputBox({\n  onSendMessage,\n  onAudioSubmit,\n  loading,\n}: InputBoxProps) {\n  const [text, setText] = useState('');\n  const [recording, setRecording] = useState(false);\n  const [mediaRecorder, setMediaRecorder] = useState<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n\n  const startRecording = async () => {\n    try {\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n      const recorder = new MediaRecorder(stream);\n      audioChunksRef.current = [];\n\n      recorder.ondataavailable = (event) => {\n        audioChunksRef.current.push(event.data);\n      };\n\n      recorder.onstop = () => {\n        const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/wav' });\n        onAudioSubmit(audioBlob);\n        stream.getTracks().forEach((track) => track.stop());\n      };\n\n      recorder.start();\n      setMediaRecorder(recorder);\n      setRecording(true);\n    } catch (error) {\n      console.error('Failed to start recording:', error);\n    }\n  };\n\n  const stopRecording = () => {\n    if (mediaRecorder) {\n      mediaRecorder.stop();\n      setRecording(false);\n      setMediaRecorder(null);\n    }\n  };\n\n  const handleSend = () => {\n    if (text.trim()) {\n      onSendMessage(text);\n      setText('');\n    }\n  };\n\n  return (\n    <div className=\"flex gap-3 items-end\">\n      {/* Text Input */}\n      <input\n        type=\"text\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n        onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n        placeholder=\"Message your DJ...\"\n        disabled={loading || recording}\n        className=\"flex-1 bg-slate-700/50 border border-slate-600 rounded-lg px-4 py-3 text-white placeholder-slate-400 focus:outline-none focus:border-green-500 focus:ring-2 focus:ring-green-500/20 transition-all duration-200 disabled:opacity-50\"\n      />\n\n      {/* Audio Button */}\n      <button\n        onClick={recording ? stopRecording : startRecording}\n        disabled={loading}\n        className={`p-3 rounded-lg transition-all duration-200 ${\n          recording\n            ? 'bg-red-500 hover:bg-red-600 shadow-lg shadow-red-500/50'\n            : 'bg-blue-500 hover:bg-blue-600'\n        } text-white disabled:opacity-50`}\n      >\n        {recording ? <Square size={20} /> : <Mic size={20} />}\n      </button>\n\n      {/* Send Button */}\n      <button\n        onClick={handleSend}\n        disabled={loading || !text.trim()}\n        className=\"p-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-lg transition-all duration-200 disabled:opacity-50 shadow-lg hover:shadow-green-500/50\"\n      >\n        <Send size={20} />\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAHA;;;;AAWe,SAAS,SAAS,EAC/B,aAAa,EACb,aAAa,EACb,OAAO,EACO;IACd,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,kQAAQ,EAAC;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kQAAQ,EAAC;IAC3C,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kQAAQ,EAAuB;IACzE,MAAM,iBAAiB,IAAA,gQAAM,EAAS,EAAE;IAExC,MAAM,iBAAiB;QACrB,IAAI;YACF,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;gBAAE,OAAO;YAAK;YACvE,MAAM,WAAW,IAAI,cAAc;YACnC,eAAe,OAAO,GAAG,EAAE;YAE3B,SAAS,eAAe,GAAG,CAAC;gBAC1B,eAAe,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI;YACxC;YAEA,SAAS,MAAM,GAAG;gBAChB,MAAM,YAAY,IAAI,KAAK,eAAe,OAAO,EAAE;oBAAE,MAAM;gBAAY;gBACvE,cAAc;gBACd,OAAO,SAAS,GAAG,OAAO,CAAC,CAAC,QAAU,MAAM,IAAI;YAClD;YAEA,SAAS,KAAK;YACd,iBAAiB;YACjB,aAAa;QACf,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,MAAM,gBAAgB;QACpB,IAAI,eAAe;YACjB,cAAc,IAAI;YAClB,aAAa;YACb,iBAAiB;QACnB;IACF;IAEA,MAAM,aAAa;QACjB,IAAI,KAAK,IAAI,IAAI;YACf,cAAc;YACd,QAAQ;QACV;IACF;IAEA,qBACE,+RAAC;QAAI,WAAU;;0BAEb,+RAAC;gBACC,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;gBACvC,YAAY,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;gBACxC,aAAY;gBACZ,UAAU,WAAW;gBACrB,WAAU;;;;;;0BAIZ,+RAAC;gBACC,SAAS,YAAY,gBAAgB;gBACrC,UAAU;gBACV,WAAW,CAAC,2CAA2C,EACrD,YACI,4DACA,gCACL,+BAA+B,CAAC;0BAEhC,0BAAY,+RAAC,iQAAM;oBAAC,MAAM;;;;;yCAAS,+RAAC,wPAAG;oBAAC,MAAM;;;;;;;;;;;0BAIjD,+RAAC;gBACC,SAAS;gBACT,UAAU,WAAW,CAAC,KAAK,IAAI;gBAC/B,WAAU;0BAEV,cAAA,+RAAC,2PAAI;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAIpB"}},
    {"offset": {"line": 364, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/ChatWindow.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect, useRef } from 'react'\nimport MessageList from './MessageList'\nimport InputBox from './InputBox'\n\ninterface Message {\n  role: 'user' | 'assistant'\n  content: string\n  audio_url?: string\n}\n\ninterface ChatWindowProps {\n  sessionId: string\n}\n\nexport default function ChatWindow({ sessionId }: ChatWindowProps) {\n  const [messages, setMessages] = useState<Message[]>([])\n  const [loading, setLoading] = useState(false)\n  const messagesEndRef = useRef<HTMLDivElement>(null)\n\n  // Fetch chat history when sessionId changes\n  useEffect(() => {\n    fetchHistory()\n  }, [sessionId])\n\n  // Scroll to bottom when messages change\n  useEffect(() => {\n    scrollToBottom()\n  }, [messages])\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }\n\n  const fetchHistory = async () => {\n    try {\n      const res = await fetch(`http://localhost:5000/chat/history/${sessionId}`)\n      const data = await res.json()\n      setMessages(data)\n    } catch (error) {\n      console.error('Failed to fetch history:', error)\n    }\n  }\n\n  const handleSendMessage = async (text: string) => {\n    setLoading(true)\n    try {\n      const res = await fetch(`http://localhost:5000/chat/${sessionId}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: text, mode: 'text' }),\n      })\n      const data = await res.json()\n      \n      if (data.message) {\n        setMessages([\n          ...messages,\n          { role: 'user', content: text },\n          { role: 'assistant', content: data.message, audio_url: data.audio_url },\n        ])\n      }\n    } catch (error) {\n      console.error('Failed to send message:', error)\n    }\n    setLoading(false)\n  }\n\n  const handleAudioSubmit = async (audioBlob: Blob) => {\n    setLoading(true)\n    try {\n      const reader = new FileReader()\n      reader.onload = async () => {\n        const base64 = (reader.result as string).split(',')[1]\n        const res = await fetch(`http://localhost:5000/audio/interact/${sessionId}`, {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify({ audio: base64 }),\n        })\n        const data = await res.json()\n        \n        if (data.assistant_said) {\n          setMessages([\n            ...messages,\n            { role: 'user', content: data.user_said },\n            { role: 'assistant', content: data.assistant_said, audio_url: data.audio_url },\n          ])\n        }\n      }\n      reader.readAsDataURL(audioBlob)\n    } catch (error) {\n      console.error('Failed to send audio:', error)\n    }\n    setLoading(false)\n  }\n\n  return (\n    <div className=\"flex flex-col h-full max-h-[600px] bg-slate-800/30 backdrop-blur-sm rounded-2xl border border-slate-700 shadow-2xl overflow-hidden\">\n      {/* Messages */}\n      <div className=\"flex-1 overflow-y-auto\">\n        <MessageList messages={messages} />\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input Area */}\n      <div className=\"border-t border-slate-700 p-4 bg-slate-900/50\">\n        <InputBox\n          onSendMessage={handleSendMessage}\n          onAudioSubmit={handleAudioSubmit}\n          loading={loading}\n        />\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAgBe,SAAS,WAAW,EAAE,SAAS,EAAmB;IAC/D,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kQAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IACvC,MAAM,iBAAiB,IAAA,gQAAM,EAAiB;IAE9C,4CAA4C;IAC5C,IAAA,mQAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAU;IAEd,wCAAwC;IACxC,IAAA,mQAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,MAAM,eAAe;QACnB,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,mCAAmC,EAAE,WAAW;YACzE,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,MAAM,oBAAoB,OAAO;QAC/B,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,2BAA2B,EAAE,WAAW,EAAE;gBACjE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;oBAAM,MAAM;gBAAO;YACrD;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAE3B,IAAI,KAAK,OAAO,EAAE;gBAChB,YAAY;uBACP;oBACH;wBAAE,MAAM;wBAAQ,SAAS;oBAAK;oBAC9B;wBAAE,MAAM;wBAAa,SAAS,KAAK,OAAO;wBAAE,WAAW,KAAK,SAAS;oBAAC;iBACvE;YACH;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;QACA,WAAW;IACb;IAEA,MAAM,oBAAoB,OAAO;QAC/B,WAAW;QACX,IAAI;YACF,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG;gBACd,MAAM,SAAS,AAAC,OAAO,MAAM,CAAY,KAAK,CAAC,IAAI,CAAC,EAAE;gBACtD,MAAM,MAAM,MAAM,MAAM,CAAC,qCAAqC,EAAE,WAAW,EAAE;oBAC3E,QAAQ;oBACR,SAAS;wBAAE,gBAAgB;oBAAmB;oBAC9C,MAAM,KAAK,SAAS,CAAC;wBAAE,OAAO;oBAAO;gBACvC;gBACA,MAAM,OAAO,MAAM,IAAI,IAAI;gBAE3B,IAAI,KAAK,cAAc,EAAE;oBACvB,YAAY;2BACP;wBACH;4BAAE,MAAM;4BAAQ,SAAS,KAAK,SAAS;wBAAC;wBACxC;4BAAE,MAAM;4BAAa,SAAS,KAAK,cAAc;4BAAE,WAAW,KAAK,SAAS;wBAAC;qBAC9E;gBACH;YACF;YACA,OAAO,aAAa,CAAC;QACvB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;QACzC;QACA,WAAW;IACb;IAEA,qBACE,+RAAC;QAAI,WAAU;;0BAEb,+RAAC;gBAAI,WAAU;;kCACb,+RAAC,6LAAW;wBAAC,UAAU;;;;;;kCACvB,+RAAC;wBAAI,KAAK;;;;;;;;;;;;0BAIZ,+RAAC;gBAAI,WAAU;0BACb,cAAA,+RAAC,0LAAQ;oBACP,eAAe;oBACf,eAAe;oBACf,SAAS;;;;;;;;;;;;;;;;;AAKnB"}},
    {"offset": {"line": 530, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { Trash2, Plus } from 'lucide-react';\n\ninterface Conversation {\n  session_id: string;\n  first_message: string;\n  message_count: number;\n  last_message_time: string;\n}\n\ninterface SidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function Sidebar({ isOpen, onClose }: SidebarProps) {\n  const [conversations, setConversations] = useState<Conversation[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchConversations();\n  }, []);\n\n  const fetchConversations = async () => {\n    setLoading(true);\n    try {\n      const res = await fetch('http://localhost:5000/chat/all-conversations');\n      const data = await res.json();\n      setConversations(data);\n    } catch (error) {\n      console.error('Failed to fetch conversations:', error);\n    }\n    setLoading(false);\n  };\n\n  const deleteConversation = async (sessionId: string) => {\n    if (!confirm('Delete this conversation?')) return;\n    try {\n      await fetch(`http://localhost:5000/chat/delete/${sessionId}`, {\n        method: 'DELETE',\n      });\n      setConversations(conversations.filter((c) => c.session_id !== sessionId));\n    } catch (error) {\n      console.error('Failed to delete conversation:', error);\n    }\n  };\n\n  const newChat = async () => {\n    try {\n      const res = await fetch('http://localhost:5000/chat/new', {\n        method: 'POST',\n      });\n      const data = await res.json();\n      window.location.href = `/chat/${data.session_id}`;\n    } catch (error) {\n      console.error('Failed to create new chat:', error);\n    }\n  };\n\n  return (\n    <>\n      {/* Sidebar */}\n      <div\n        className={`fixed md:static w-64 h-screen bg-gradient-to-b from-slate-800 to-slate-900 border-r border-slate-700 transform transition-transform duration-300 ease-in-out z-40 flex flex-col ${\n          isOpen ? 'translate-x-0' : '-translate-x-full md:translate-x-0'\n        }`}\n      >\n        {/* New Chat Button */}\n        <button\n          onClick={newChat}\n          className=\"m-4 flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-3 px-4 rounded-lg transition-all duration-200 shadow-lg hover:shadow-green-500/50\"\n        >\n          <Plus size={20} />\n          New Chat\n        </button>\n\n        {/* Conversations List */}\n        <div className=\"flex-1 overflow-y-auto px-3 py-4\">\n          <h3 className=\"text-xs font-semibold text-slate-400 uppercase tracking-wider mb-3 px-2\">\n            Previous Conversations\n          </h3>\n          <div className=\"space-y-2\">\n            {conversations.length === 0 ? (\n              <p className=\"text-sm text-slate-500 px-2\">No conversations yet</p>\n            ) : (\n              conversations.map((conv) => (\n                <div\n                  key={conv.session_id}\n                  className=\"group p-3 rounded-lg bg-slate-700/30 hover:bg-slate-700/60 transition-all duration-200 cursor-pointer\"\n                  onClick={() => {\n                    window.location.href = `/chat/${conv.session_id}`;\n                    onClose();\n                  }}\n                >\n                  <p className=\"text-sm font-medium text-slate-200 truncate group-hover:text-white transition-colors\">\n                    {conv.first_message.substring(0, 30)}...\n                  </p>\n                  <p className=\"text-xs text-slate-400 mt-1\">\n                    {conv.message_count} messages\n                  </p>\n                  <button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      deleteConversation(conv.session_id);\n                    }}\n                    className=\"opacity-0 group-hover:opacity-100 mt-2 flex items-center gap-1 text-xs text-red-400 hover:text-red-300 transition-all duration-200\"\n                  >\n                    <Trash2 size={14} />\n                    Delete\n                  </button>\n                </div>\n              ))\n            )}\n          </div>\n        </div>\n\n        {/* Footer Info */}\n        <div className=\"p-4 border-t border-slate-700\">\n          <p className=\"text-xs text-slate-500 text-center\">ðŸŽµ DJ Spot v1.0</p>\n        </div>\n      </div>\n    </>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAHA;;;;AAiBe,SAAS,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAgB;IAC/D,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,kQAAQ,EAAiB,EAAE;IACrE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IAEvC,IAAA,mQAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,qBAAqB;QACzB,WAAW;QACX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM;YACxB,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,iBAAiB;QACnB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;QAClD;QACA,WAAW;IACb;IAEA,MAAM,qBAAqB,OAAO;QAChC,IAAI,CAAC,QAAQ,8BAA8B;QAC3C,IAAI;YACF,MAAM,MAAM,CAAC,kCAAkC,EAAE,WAAW,EAAE;gBAC5D,QAAQ;YACV;YACA,iBAAiB,cAAc,MAAM,CAAC,CAAC,IAAM,EAAE,UAAU,KAAK;QAChE,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF;IAEA,MAAM,UAAU;QACd,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,kCAAkC;gBACxD,QAAQ;YACV;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,MAAM,EAAE,KAAK,UAAU,EAAE;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C;IACF;IAEA,qBACE;kBAEE,cAAA,+RAAC;YACC,WAAW,CAAC,gLAAgL,EAC1L,SAAS,kBAAkB,sCAC3B;;8BAGF,+RAAC;oBACC,SAAS;oBACT,WAAU;;sCAEV,+RAAC,2PAAI;4BAAC,MAAM;;;;;;wBAAM;;;;;;;8BAKpB,+RAAC;oBAAI,WAAU;;sCACb,+RAAC;4BAAG,WAAU;sCAA0E;;;;;;sCAGxF,+RAAC;4BAAI,WAAU;sCACZ,cAAc,MAAM,KAAK,kBACxB,+RAAC;gCAAE,WAAU;0CAA8B;;;;;uCAE3C,cAAc,GAAG,CAAC,CAAC,qBACjB,+RAAC;oCAEC,WAAU;oCACV,SAAS;wCACP,OAAO,QAAQ,CAAC,IAAI,GAAG,CAAC,MAAM,EAAE,KAAK,UAAU,EAAE;wCACjD;oCACF;;sDAEA,+RAAC;4CAAE,WAAU;;gDACV,KAAK,aAAa,CAAC,SAAS,CAAC,GAAG;gDAAI;;;;;;;sDAEvC,+RAAC;4CAAE,WAAU;;gDACV,KAAK,aAAa;gDAAC;;;;;;;sDAEtB,+RAAC;4CACC,SAAS,CAAC;gDACR,EAAE,eAAe;gDACjB,mBAAmB,KAAK,UAAU;4CACpC;4CACA,WAAU;;8DAEV,+RAAC,qQAAM;oDAAC,MAAM;;;;;;gDAAM;;;;;;;;mCApBjB,KAAK,UAAU;;;;;;;;;;;;;;;;8BA8B9B,+RAAC;oBAAI,WAAU;8BACb,cAAA,+RAAC;wBAAE,WAAU;kCAAqC;;;;;;;;;;;;;;;;;;AAK5D"}},
    {"offset": {"line": 717, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/app/chat/%5BsessionId%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useParams } from 'next/navigation';\nimport { useState } from 'react';\nimport ChatWindow from '@/components/ChatWindow';\nimport Sidebar from '@/components/Sidebar';\nimport { Menu, X } from 'lucide-react';\n\nexport default function ChatPage() {\n  const params = useParams();\n  const sessionId = params.sessionId as string;\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n\n  const handleNewChat = () => {\n    window.location.href = '/';\n  };\n\n  return (\n    <div className=\"flex h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-black\">\n      {/* Sidebar with slide animation */}\n      <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n\n      {/* Overlay for mobile */}\n      {sidebarOpen && (\n        <div\n          className=\"fixed inset-0 bg-black/50 z-30 md:hidden\"\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Header with Menu Button */}\n        <div className=\"flex items-center justify-between p-4 border-b border-slate-700\">\n          <button\n            onClick={() => setSidebarOpen(!sidebarOpen)}\n            className=\"p-2 hover:bg-slate-700 rounded-lg transition-colors md:hidden\"\n          >\n            {sidebarOpen ? <X size={24} /> : <Menu size={24} />}\n          </button>\n          <h1 className=\"text-xl font-bold bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent\">\n            Spotify Agent\n          </h1>\n          <div className=\"w-10\" /> {/* Spacer for centering */}\n        </div>\n\n        {/* Chat Area - Centered at bottom */}\n        <div className=\"flex-1 flex flex-col justify-between p-4 md:p-8\">\n          {/* Empty space for visualization */}\n          <div className=\"flex-1\" />\n\n          {/* Chat Window centered */}\n          <div className=\"w-full max-w-2xl mx-auto\">\n            <ChatWindow sessionId={sessionId} />\n          </div>\n        </div>\n\n        {/* Footer with Logo */}\n        <div className=\"flex items-center justify-between p-4 border-t border-slate-700 bg-slate-900/50\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-full bg-gradient-to-r from-green-400 to-green-600 flex items-center justify-center font-bold\">\n              ðŸŽµ\n            </div>\n            <span className=\"text-sm text-slate-400\">DJ Spot</span>\n          </div>\n          <span className=\"text-xs text-slate-500\">Powered by AI</span>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,SAAS,IAAA,gMAAS;IACxB,MAAM,YAAY,OAAO,SAAS;IAClC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,kQAAQ,EAAC;IAE/C,MAAM,gBAAgB;QACpB,OAAO,QAAQ,CAAC,IAAI,GAAG;IACzB;IAEA,qBACE,+RAAC;QAAI,WAAU;;0BAEb,+RAAC,yLAAO;gBAAC,QAAQ;gBAAa,SAAS,IAAM,eAAe;;;;;;YAG3D,6BACC,+RAAC;gBACC,WAAU;gBACV,SAAS,IAAM,eAAe;;;;;;0BAKlC,+RAAC;gBAAI,WAAU;;kCAEb,+RAAC;wBAAI,WAAU;;0CACb,+RAAC;gCACC,SAAS,IAAM,eAAe,CAAC;gCAC/B,WAAU;0CAET,4BAAc,+RAAC,kPAAC;oCAAC,MAAM;;;;;yDAAS,+RAAC,2PAAI;oCAAC,MAAM;;;;;;;;;;;0CAE/C,+RAAC;gCAAG,WAAU;0CAA8F;;;;;;0CAG5G,+RAAC;gCAAI,WAAU;;;;;;4BAAS;;;;;;;kCAI1B,+RAAC;wBAAI,WAAU;;0CAEb,+RAAC;gCAAI,WAAU;;;;;;0CAGf,+RAAC;gCAAI,WAAU;0CACb,cAAA,+RAAC,4LAAU;oCAAC,WAAW;;;;;;;;;;;;;;;;;kCAK3B,+RAAC;wBAAI,WAAU;;0CACb,+RAAC;gCAAI,WAAU;;kDACb,+RAAC;wCAAI,WAAU;kDAA+G;;;;;;kDAG9H,+RAAC;wCAAK,WAAU;kDAAyB;;;;;;;;;;;;0CAE3C,+RAAC;gCAAK,WAAU;0CAAyB;;;;;;;;;;;;;;;;;;;;;;;;AAKnD"}}]
}