{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/Sidebar.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport Link from 'next/link';\nimport { Plus, Trash2 } from 'lucide-react';\nimport { useRouter } from 'next/navigation';\n\ninterface ChatSession {\n  id: string;\n  title: string;\n  created_at: string;\n}\n\nexport default function Sidebar({ currentSessionId }: { currentSessionId?: string }) {\n  const [sessions, setSessions] = useState<ChatSession[]>([]);\n  const [loading, setLoading] = useState(true);\n  const router = useRouter();\n\n  useEffect(() => {\n    fetchSessions();\n  }, []);\n\n  const fetchSessions = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/chat/sessions');\n      const data = await response.json();\n      setSessions(data.sessions || []);\n    } catch (error) {\n      console.error('Failed to fetch sessions:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleNewChat = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/chat/new', {\n        method: 'POST',\n      });\n      const data = await response.json();\n      router.push(`/chat/${data.session_id}`);\n      fetchSessions();\n    } catch (error) {\n      console.error('Failed to create new chat:', error);\n    }\n  };\n\n  const handleDeleteChat = async (sessionId: string, e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    if (confirm('Delete this chat?')) {\n      try {\n        await fetch(`http://localhost:5000/chat/${sessionId}`, {\n          method: 'DELETE',\n        });\n        setSessions(sessions.filter((s) => s.id !== sessionId));\n        if (currentSessionId === sessionId) {\n          router.push('/');\n        }\n      } catch (error) {\n        console.error('Failed to delete chat:', error);\n      }\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const today = new Date();\n    const yesterday = new Date(today);\n    yesterday.setDate(yesterday.getDate() - 1);\n\n    if (date.toDateString() === today.toDateString()) {\n      return date.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });\n    } else if (date.toDateString() === yesterday.toDateString()) {\n      return 'Yesterday';\n    } else {\n      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });\n    }\n  };\n\n  return (\n    <div className=\"w-64 bg-gray-900 text-white h-screen flex flex-col border-r border-gray-700\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-gray-700\">\n        <button\n          onClick={handleNewChat}\n          className=\"w-full flex items-center justify-center gap-2 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition\"\n        >\n          <Plus size={20} />\n          New Chat\n        </button>\n      </div>\n\n      {/* Chat History */}\n      <div className=\"flex-1 overflow-y-auto p-3 space-y-2\">\n        {loading ? (\n          <div className=\"text-gray-400 text-sm p-2\">Loading chats...</div>\n        ) : sessions.length === 0 ? (\n          <div className=\"text-gray-400 text-sm p-2\">No chats yet</div>\n        ) : (\n          sessions.map((session) => (\n            <Link\n              key={session.id}\n              href={`/chat/${session.id}`}\n              className={`block p-3 rounded-lg hover:bg-gray-800 transition group ${\n                currentSessionId === session.id ? 'bg-gray-800' : ''\n              }`}\n            >\n              <div className=\"flex items-start justify-between gap-2\">\n                <div className=\"flex-1 min-w-0\">\n                  <p className=\"text-sm font-medium truncate\">{session.title}</p>\n                  <p className=\"text-xs text-gray-500 mt-1\">{formatDate(session.created_at)}</p>\n                </div>\n                <button\n                  onClick={(e) => handleDeleteChat(session.id, e)}\n                  className=\"opacity-0 group-hover:opacity-100 text-gray-400 hover:text-red-400 transition p-1\"\n                  title=\"Delete chat\"\n                >\n                  <Trash2 size={16} />\n                </button>\n              </div>\n            </Link>\n          ))\n        )}\n      </div>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-gray-700 text-xs text-gray-400\">\n        <p>DJ Spot</p>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/MessageList.tsx"],"sourcesContent":["'use client';\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp?: string;\n}\n\nexport default function MessageList({ messages }: { messages: Message[] }) {\n  return (\n    <div className=\"flex-1 overflow-y-auto p-6 space-y-4\">\n      {messages.length === 0 ? (\n        <div className=\"flex items-center justify-center h-full text-gray-400\">\n          <p>Start a conversation with DJ Spot!</p>\n        </div>\n      ) : (\n        messages.map((message, index) => (\n          <div\n            key={index}\n            className={`flex ${message.role === 'user' ? 'justify-end' : 'justify-start'}`}\n          >\n            <div\n              className={`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${\n                message.role === 'user'\n                  ? 'bg-green-600 text-white'\n                  : 'bg-gray-700 text-gray-100'\n              }`}\n            >\n              <p className=\"text-sm\">{message.content}</p>\n            </div>\n          </div>\n        ))\n      )}\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;;AAQe,SAAS,YAAY,EAAE,QAAQ,EAA2B;IACvE,qBACE,+RAAC;QAAI,WAAU;kBACZ,SAAS,MAAM,KAAK,kBACnB,+RAAC;YAAI,WAAU;sBACb,cAAA,+RAAC;0BAAE;;;;;;;;;;mBAGL,SAAS,GAAG,CAAC,CAAC,SAAS,sBACrB,+RAAC;gBAEC,WAAW,CAAC,KAAK,EAAE,QAAQ,IAAI,KAAK,SAAS,gBAAgB,iBAAiB;0BAE9E,cAAA,+RAAC;oBACC,WAAW,CAAC,0CAA0C,EACpD,QAAQ,IAAI,KAAK,SACb,4BACA,6BACJ;8BAEF,cAAA,+RAAC;wBAAE,WAAU;kCAAW,QAAQ,OAAO;;;;;;;;;;;eAVpC;;;;;;;;;;AAiBjB"}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/InputBox.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Send } from 'lucide-react';\n\ninterface InputBoxProps {\n  onSendMessage: (message: string) => void;\n  disabled: boolean;\n}\n\nexport default function InputBox({ onSendMessage, disabled }: InputBoxProps) {\n  const [input, setInput] = useState('');\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (input.trim() && !disabled) {\n      onSendMessage(input);\n      setInput('');\n    }\n  };\n\n  return (\n    <form\n      onSubmit={handleSubmit}\n      className=\"p-4 border-t border-gray-700 bg-gray-800 flex gap-2\"\n    >\n      <input\n        type=\"text\"\n        value={input}\n        onChange={(e) => setInput(e.target.value)}\n        placeholder=\"Message DJ Spot...\"\n        disabled={disabled}\n        className=\"flex-1 bg-gray-700 text-white placeholder-gray-400 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-600 disabled:opacity-50\"\n      />\n      <button\n        type=\"submit\"\n        disabled={disabled || !input.trim()}\n        className=\"bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white p-2 rounded-lg transition\"\n      >\n        <Send size={20} />\n      </button>\n    </form>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAUe,SAAS,SAAS,EAAE,aAAa,EAAE,QAAQ,EAAiB;IACzE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,kQAAQ,EAAC;IAEnC,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,MAAM,IAAI,MAAM,CAAC,UAAU;YAC7B,cAAc;YACd,SAAS;QACX;IACF;IAEA,qBACE,+RAAC;QACC,UAAU;QACV,WAAU;;0BAEV,+RAAC;gBACC,MAAK;gBACL,OAAO;gBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;gBACxC,aAAY;gBACZ,UAAU;gBACV,WAAU;;;;;;0BAEZ,+RAAC;gBACC,MAAK;gBACL,UAAU,YAAY,CAAC,MAAM,IAAI;gBACjC,WAAU;0BAEV,cAAA,+RAAC,2PAAI;oBAAC,MAAM;;;;;;;;;;;;;;;;;AAIpB"}},
    {"offset": {"line": 360, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/components/ChatWindow.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef } from 'react';\nimport MessageList from './MessageList';\nimport InputBox from './InputBox';\n\ninterface Message {\n  role: 'user' | 'assistant';\n  content: string;\n  timestamp?: string;\n}\n\nexport default function ChatWindow({ sessionId }: { sessionId: string }) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(false);\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    // Fetch existing chat session\n    const fetchSession = async () => {\n      try {\n        const response = await fetch(`http://localhost:5000/chat/${sessionId}`);\n        if (response.ok) {\n          const data = await response.json();\n          // The backend returns the session object directly, not wrapped\n          setMessages(data.messages || []);\n        }\n      } catch (error) {\n        console.error('Failed to fetch session:', error);\n      }\n    };\n    fetchSession();\n  }, [sessionId]);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSendMessage = async (text: string) => {\n    if (!text.trim()) return;\n\n    const userMessage: Message = { role: 'user', content: text };\n    setMessages((prev) => [...prev, userMessage]);\n    setLoading(true);\n\n    try {\n      const response = await fetch(`http://localhost:5000/chat/${sessionId}`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ message: text }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Failed to send message');\n      }\n\n      const data = await response.json();\n      const assistantMessage: Message = {\n        role: 'assistant',\n        content: data.message,\n        timestamp: new Date().toISOString(),\n      };\n      setMessages((prev) => [...prev, assistantMessage]);\n    } catch (error) {\n      console.error('Error sending message:', error);\n      setMessages((prev) => [\n        ...prev,\n        {\n          role: 'assistant',\n          content: 'Sorry, something went wrong. Please try again.',\n        },\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"flex-1 flex flex-col bg-gray-800\">\n      <MessageList messages={messages} />\n      <div ref={messagesEndRef} />\n      <InputBox onSendMessage={handleSendMessage} disabled={loading} />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAYe,SAAS,WAAW,EAAE,SAAS,EAAyB;IACrE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,kQAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,kQAAQ,EAAC;IACvC,MAAM,iBAAiB,IAAA,gQAAM,EAAiB;IAE9C,IAAA,mQAAS,EAAC;QACR,8BAA8B;QAC9B,MAAM,eAAe;YACnB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,CAAC,2BAA2B,EAAE,WAAW;gBACtE,IAAI,SAAS,EAAE,EAAE;oBACf,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChC,+DAA+D;oBAC/D,YAAY,KAAK,QAAQ,IAAI,EAAE;gBACjC;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,4BAA4B;YAC5C;QACF;QACA;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,iBAAiB;QACrB,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D;IAEA,IAAA,mQAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAS;IAEb,MAAM,oBAAoB,OAAO;QAC/B,IAAI,CAAC,KAAK,IAAI,IAAI;QAElB,MAAM,cAAuB;YAAE,MAAM;YAAQ,SAAS;QAAK;QAC3D,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAY;QAC5C,WAAW;QAEX,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,CAAC,2BAA2B,EAAE,WAAW,EAAE;gBACtE,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,SAAS;gBAAK;YACvC;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,mBAA4B;gBAChC,MAAM;gBACN,SAAS,KAAK,OAAO;gBACrB,WAAW,IAAI,OAAO,WAAW;YACnC;YACA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAiB;QACnD,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;YACxC,YAAY,CAAC,OAAS;uBACjB;oBACH;wBACE,MAAM;wBACN,SAAS;oBACX;iBACD;QACH,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,+RAAC;QAAI,WAAU;;0BACb,+RAAC,6LAAW;gBAAC,UAAU;;;;;;0BACvB,+RAAC;gBAAI,KAAK;;;;;;0BACV,+RAAC,0LAAQ;gBAAC,eAAe;gBAAmB,UAAU;;;;;;;;;;;;AAG5D"}},
    {"offset": {"line": 488, "column": 0}, "map": {"version":3,"sources":["file:///home/yannis/Spotify_Agent/spotify-agent-frontend/src/app/chat/%5BsessionId%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useParams } from 'next/navigation';\nimport { useState, useEffect } from 'react';\nimport Sidebar from '@/components/Sidebar';\nimport ChatWindow from '@/components/ChatWindow';\n\nexport default function ChatPage() {\n  const params = useParams();\n  const [sessionId, setSessionId] = useState<string | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (params?.sessionId) {\n      setSessionId(params.sessionId as string);\n      setIsLoading(false);\n    }\n  }, [params?.sessionId]);\n\n  if (isLoading || !sessionId) {\n    return (\n      <div className=\"flex items-center justify-center h-screen bg-gray-900 text-white\">\n        <p>Loading chat...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"flex h-screen bg-gray-900\">\n      <Sidebar currentSessionId={sessionId} />\n      <ChatWindow sessionId={sessionId} />\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,SAAS,IAAA,gMAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kQAAQ,EAAgB;IAC1D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,kQAAQ,EAAC;IAE3C,IAAA,mQAAS,EAAC;QACR,IAAI,QAAQ,WAAW;YACrB,aAAa,OAAO,SAAS;YAC7B,aAAa;QACf;IACF,GAAG;QAAC,QAAQ;KAAU;IAEtB,IAAI,aAAa,CAAC,WAAW;QAC3B,qBACE,+RAAC;YAAI,WAAU;sBACb,cAAA,+RAAC;0BAAE;;;;;;;;;;;IAGT;IAEA,qBACE,+RAAC;QAAI,WAAU;;0BACb,+RAAC,yLAAO;gBAAC,kBAAkB;;;;;;0BAC3B,+RAAC,4LAAU;gBAAC,WAAW;;;;;;;;;;;;AAG7B"}}]
}